{"ast":null,"code":"import user from \"@/logic/user\";\nimport jwt_decode from \"jwt-decode\";\nexport default {\n  namespace: true,\n\n  state() {\n    return {\n      user: null,\n      token: null\n    };\n  },\n\n  mutations: {\n    addToken(state, data) {\n      state.token = data;\n    },\n\n    removeToken(state) {\n      state.token = null;\n    },\n\n    setUser(state, data) {\n      state.user = data;\n    },\n\n    removeUser(state) {\n      state.user = null;\n    }\n\n  },\n  actions: {\n    async login(context, creds) {\n      const res = await user.login(creds);\n      if (!res) return false;\n      console.log(res.data);\n\n      if (res.status === 200 && res.data.token) {\n        context.commit(\"addToken\", res.data.token);\n        context.commit(\"setUser\", {\n          username: res.data.username,\n          name: res.data.name,\n          email: res.data.email\n        });\n        window.localStorage.setItem(\"authToken\", `bearer ${context.state.token}`);\n        return true;\n      }\n\n      return false;\n    },\n\n    checkLocalStorage(context) {\n      var token = window.localStorage.getItem(\"authToken\");\n\n      if (token) {\n        context.commit(\"addToken\", token);\n        return true;\n      }\n\n      return false;\n    },\n\n    autoLogin({\n      state,\n      commit\n    }) {\n      const data = jwt_decode(state.token);\n      commit(\"setUser\", data);\n    },\n\n    deleteToken({\n      commit\n    }) {\n      commit(\"removeToken\");\n      commit(\"removeUser\");\n    }\n\n  }\n};","map":{"version":3,"names":["user","jwt_decode","namespace","state","token","mutations","addToken","data","removeToken","setUser","removeUser","actions","login","context","creds","res","console","log","status","commit","username","name","email","window","localStorage","setItem","checkLocalStorage","getItem","autoLogin","deleteToken"],"sources":["/Users/ahmed/Documents/projects/vulnerable_laravel_app/frontend/src/modules/user.js"],"sourcesContent":["import user from \"@/logic/user\";\nimport jwt_decode from \"jwt-decode\";\n\nexport default {\n  namespace: true,\n  state() {\n    return {\n      user: null,\n      token: null,\n    };\n  },\n  mutations: {\n    addToken(state, data) {\n      state.token = data;\n    },\n    removeToken(state) {\n      state.token = null;\n    },\n    setUser(state, data) {\n      state.user = data;\n    },\n    removeUser(state) {\n      state.user = null;\n    },\n  },\n  actions: {\n    async login(context, creds) {\n      const res = await user.login(creds);\n      if (!res) return false;\n      console.log(res.data);\n      if (res.status === 200 && res.data.token) {\n        context.commit(\"addToken\", res.data.token);\n        context.commit(\"setUser\", {\n          username: res.data.username,\n          name: res.data.name,\n          email: res.data.email,\n        });\n\n        window.localStorage.setItem(\n          \"authToken\",\n          `bearer ${context.state.token}`\n        );\n        return true;\n      }\n\n      return false;\n    },\n    checkLocalStorage(context) {\n      var token = window.localStorage.getItem(\"authToken\");\n\n      if (token) {\n        context.commit(\"addToken\", token);\n        return true;\n      }\n\n      return false;\n    },\n    autoLogin({ state, commit }) {\n      const data = jwt_decode(state.token);\n      commit(\"setUser\", data);\n    },\n    deleteToken({ commit }) {\n      commit(\"removeToken\");\n      commit(\"removeUser\");\n    },\n  },\n};\n"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,cAAjB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AAEA,eAAe;EACbC,SAAS,EAAE,IADE;;EAEbC,KAAK,GAAG;IACN,OAAO;MACLH,IAAI,EAAE,IADD;MAELI,KAAK,EAAE;IAFF,CAAP;EAID,CAPY;;EAQbC,SAAS,EAAE;IACTC,QAAQ,CAACH,KAAD,EAAQI,IAAR,EAAc;MACpBJ,KAAK,CAACC,KAAN,GAAcG,IAAd;IACD,CAHQ;;IAITC,WAAW,CAACL,KAAD,EAAQ;MACjBA,KAAK,CAACC,KAAN,GAAc,IAAd;IACD,CANQ;;IAOTK,OAAO,CAACN,KAAD,EAAQI,IAAR,EAAc;MACnBJ,KAAK,CAACH,IAAN,GAAaO,IAAb;IACD,CATQ;;IAUTG,UAAU,CAACP,KAAD,EAAQ;MAChBA,KAAK,CAACH,IAAN,GAAa,IAAb;IACD;;EAZQ,CARE;EAsBbW,OAAO,EAAE;IACP,MAAMC,KAAN,CAAYC,OAAZ,EAAqBC,KAArB,EAA4B;MAC1B,MAAMC,GAAG,GAAG,MAAMf,IAAI,CAACY,KAAL,CAAWE,KAAX,CAAlB;MACA,IAAI,CAACC,GAAL,EAAU,OAAO,KAAP;MACVC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACR,IAAhB;;MACA,IAAIQ,GAAG,CAACG,MAAJ,KAAe,GAAf,IAAsBH,GAAG,CAACR,IAAJ,CAASH,KAAnC,EAA0C;QACxCS,OAAO,CAACM,MAAR,CAAe,UAAf,EAA2BJ,GAAG,CAACR,IAAJ,CAASH,KAApC;QACAS,OAAO,CAACM,MAAR,CAAe,SAAf,EAA0B;UACxBC,QAAQ,EAAEL,GAAG,CAACR,IAAJ,CAASa,QADK;UAExBC,IAAI,EAAEN,GAAG,CAACR,IAAJ,CAASc,IAFS;UAGxBC,KAAK,EAAEP,GAAG,CAACR,IAAJ,CAASe;QAHQ,CAA1B;QAMAC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CACE,WADF,EAEG,UAASZ,OAAO,CAACV,KAAR,CAAcC,KAAM,EAFhC;QAIA,OAAO,IAAP;MACD;;MAED,OAAO,KAAP;IACD,CArBM;;IAsBPsB,iBAAiB,CAACb,OAAD,EAAU;MACzB,IAAIT,KAAK,GAAGmB,MAAM,CAACC,YAAP,CAAoBG,OAApB,CAA4B,WAA5B,CAAZ;;MAEA,IAAIvB,KAAJ,EAAW;QACTS,OAAO,CAACM,MAAR,CAAe,UAAf,EAA2Bf,KAA3B;QACA,OAAO,IAAP;MACD;;MAED,OAAO,KAAP;IACD,CA/BM;;IAgCPwB,SAAS,CAAC;MAAEzB,KAAF;MAASgB;IAAT,CAAD,EAAoB;MAC3B,MAAMZ,IAAI,GAAGN,UAAU,CAACE,KAAK,CAACC,KAAP,CAAvB;MACAe,MAAM,CAAC,SAAD,EAAYZ,IAAZ,CAAN;IACD,CAnCM;;IAoCPsB,WAAW,CAAC;MAAEV;IAAF,CAAD,EAAa;MACtBA,MAAM,CAAC,aAAD,CAAN;MACAA,MAAM,CAAC,YAAD,CAAN;IACD;;EAvCM;AAtBI,CAAf"},"metadata":{},"sourceType":"module"}