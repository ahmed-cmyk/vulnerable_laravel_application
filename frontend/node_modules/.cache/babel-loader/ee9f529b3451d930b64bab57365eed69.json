{"ast":null,"code":"import user from \"@/logic/user\";\nimport jwt_decode from \"jwt-decode\";\nexport default {\n  namespace: true,\n\n  state() {\n    return {\n      user: null,\n      token: null\n    };\n  },\n\n  mutations: {\n    addToken(state, data) {\n      state.token = data;\n    },\n\n    removeToken(state) {\n      state.token = null;\n    },\n\n    setUser(state, data) {\n      state.user = data;\n    },\n\n    removeUser(state) {\n      state.user = null;\n    }\n\n  },\n  actions: {\n    async login(context, creds) {\n      const res = await user.login(creds);\n      if (!res) return false;\n      let token = res.data.authorisation.token ?? null;\n\n      if (res.status === 200 && token) {\n        context.commit(\"addToken\", token);\n        context.commit(\"setUser\", {\n          name: res.data.user.name,\n          email: res.data.user.email\n        });\n        console.log(\"token\", context.state.token);\n        window.localStorage.setItem(\"authToken\", `bearer ${context.state.token}`);\n        return true;\n      }\n\n      return false;\n    },\n\n    checkLocalStorage(context) {\n      var token = window.localStorage.getItem(\"authToken\");\n\n      if (token) {\n        context.commit(\"addToken\", token);\n        return true;\n      }\n\n      return false;\n    },\n\n    autoLogin({\n      state,\n      commit\n    }) {\n      const data = jwt_decode(state.token);\n      commit(\"setUser\", data);\n    },\n\n    deleteToken({\n      commit\n    }) {\n      commit(\"removeToken\");\n      commit(\"removeUser\");\n    }\n\n  }\n};","map":{"version":3,"names":["user","jwt_decode","namespace","state","token","mutations","addToken","data","removeToken","setUser","removeUser","actions","login","context","creds","res","authorisation","status","commit","name","email","console","log","window","localStorage","setItem","checkLocalStorage","getItem","autoLogin","deleteToken"],"sources":["/Users/ahmed/Documents/projects/vulnerable_laravel_app/frontend/src/modules/user.js"],"sourcesContent":["import user from \"@/logic/user\";\nimport jwt_decode from \"jwt-decode\";\n\nexport default {\n  namespace: true,\n  state() {\n    return {\n      user: null,\n      token: null,\n    };\n  },\n  mutations: {\n    addToken(state, data) {\n      state.token = data;\n    },\n    removeToken(state) {\n      state.token = null;\n    },\n    setUser(state, data) {\n      state.user = data;\n    },\n    removeUser(state) {\n      state.user = null;\n    },\n  },\n  actions: {\n    async login(context, creds) {\n      const res = await user.login(creds);\n      if (!res) return false;\n\n      let token = res.data.authorisation.token ?? null;\n\n      if (res.status === 200 && token) {\n        context.commit(\"addToken\", token);\n        context.commit(\"setUser\", {\n          name: res.data.user.name,\n          email: res.data.user.email,\n        });\n        console.log(\"token\", context.state.token);\n        window.localStorage.setItem(\n          \"authToken\",\n          `bearer ${context.state.token}`\n        );\n        return true;\n      }\n\n      return false;\n    },\n    checkLocalStorage(context) {\n      var token = window.localStorage.getItem(\"authToken\");\n\n      if (token) {\n        context.commit(\"addToken\", token);\n        return true;\n      }\n\n      return false;\n    },\n    autoLogin({ state, commit }) {\n      const data = jwt_decode(state.token);\n      commit(\"setUser\", data);\n    },\n    deleteToken({ commit }) {\n      commit(\"removeToken\");\n      commit(\"removeUser\");\n    },\n  },\n};\n"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,cAAjB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AAEA,eAAe;EACbC,SAAS,EAAE,IADE;;EAEbC,KAAK,GAAG;IACN,OAAO;MACLH,IAAI,EAAE,IADD;MAELI,KAAK,EAAE;IAFF,CAAP;EAID,CAPY;;EAQbC,SAAS,EAAE;IACTC,QAAQ,CAACH,KAAD,EAAQI,IAAR,EAAc;MACpBJ,KAAK,CAACC,KAAN,GAAcG,IAAd;IACD,CAHQ;;IAITC,WAAW,CAACL,KAAD,EAAQ;MACjBA,KAAK,CAACC,KAAN,GAAc,IAAd;IACD,CANQ;;IAOTK,OAAO,CAACN,KAAD,EAAQI,IAAR,EAAc;MACnBJ,KAAK,CAACH,IAAN,GAAaO,IAAb;IACD,CATQ;;IAUTG,UAAU,CAACP,KAAD,EAAQ;MAChBA,KAAK,CAACH,IAAN,GAAa,IAAb;IACD;;EAZQ,CARE;EAsBbW,OAAO,EAAE;IACP,MAAMC,KAAN,CAAYC,OAAZ,EAAqBC,KAArB,EAA4B;MAC1B,MAAMC,GAAG,GAAG,MAAMf,IAAI,CAACY,KAAL,CAAWE,KAAX,CAAlB;MACA,IAAI,CAACC,GAAL,EAAU,OAAO,KAAP;MAEV,IAAIX,KAAK,GAAGW,GAAG,CAACR,IAAJ,CAASS,aAAT,CAAuBZ,KAAvB,IAAgC,IAA5C;;MAEA,IAAIW,GAAG,CAACE,MAAJ,KAAe,GAAf,IAAsBb,KAA1B,EAAiC;QAC/BS,OAAO,CAACK,MAAR,CAAe,UAAf,EAA2Bd,KAA3B;QACAS,OAAO,CAACK,MAAR,CAAe,SAAf,EAA0B;UACxBC,IAAI,EAAEJ,GAAG,CAACR,IAAJ,CAASP,IAAT,CAAcmB,IADI;UAExBC,KAAK,EAAEL,GAAG,CAACR,IAAJ,CAASP,IAAT,CAAcoB;QAFG,CAA1B;QAIAC,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBT,OAAO,CAACV,KAAR,CAAcC,KAAnC;QACAmB,MAAM,CAACC,YAAP,CAAoBC,OAApB,CACE,WADF,EAEG,UAASZ,OAAO,CAACV,KAAR,CAAcC,KAAM,EAFhC;QAIA,OAAO,IAAP;MACD;;MAED,OAAO,KAAP;IACD,CAtBM;;IAuBPsB,iBAAiB,CAACb,OAAD,EAAU;MACzB,IAAIT,KAAK,GAAGmB,MAAM,CAACC,YAAP,CAAoBG,OAApB,CAA4B,WAA5B,CAAZ;;MAEA,IAAIvB,KAAJ,EAAW;QACTS,OAAO,CAACK,MAAR,CAAe,UAAf,EAA2Bd,KAA3B;QACA,OAAO,IAAP;MACD;;MAED,OAAO,KAAP;IACD,CAhCM;;IAiCPwB,SAAS,CAAC;MAAEzB,KAAF;MAASe;IAAT,CAAD,EAAoB;MAC3B,MAAMX,IAAI,GAAGN,UAAU,CAACE,KAAK,CAACC,KAAP,CAAvB;MACAc,MAAM,CAAC,SAAD,EAAYX,IAAZ,CAAN;IACD,CApCM;;IAqCPsB,WAAW,CAAC;MAAEX;IAAF,CAAD,EAAa;MACtBA,MAAM,CAAC,aAAD,CAAN;MACAA,MAAM,CAAC,YAAD,CAAN;IACD;;EAxCM;AAtBI,CAAf"},"metadata":{},"sourceType":"module"}